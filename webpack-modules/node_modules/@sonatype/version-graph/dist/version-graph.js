!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.versionGraph=e():t.versionGraph=e()}(self,(function(){return function(){"use strict";var t={d:function(e,n){for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{renderVersionGraph:function(){return x},selectVersion:function(){return y}});var n,i,r,a,o,l,d,h="#006bbf",s="#575757",u="#f7fbfe",c="#cee8fb",p=0,f=null,v=0,g=0,b={fontSize:9,leftPadding:0,rightPadding:0},x=function(t){var e={showDetails:!1,showCurrentVersionLabel:!1,partialDisplay:!1,selectable:!1,barGap:3,barWidth:8,contentWidth:375,labelTop:14,labelWidth:100,topPadding:20,vizPadding:6,versionClick:$.noop,versionDblClick:$.noop},x={actualHeight:function(t){return this.height(t)+11+this.bottomPadding(t)},noCategoriesActualHeight:function(t){return this.noCategoriesHeight(t)+11+this.bottomPadding(t)},barHeight:function(t){return 3*(t.barWidth+t.barGap)-1},height:function(t){return t.topPadding+this.contentRows(t)*(t.barWidth+t.barGap)+1},noCategoriesHeight:function(t){return t.topPadding+this.contentRowsNoCategories(t)*(t.barWidth+t.barGap)+1},contentRows:function(t){return t.partialDisplay?4:11},contentRowsNoCategories:function(t){return t.partialDisplay?4:6},bottomPadding:function(t){return t.partialDisplay?20:0},versionCount:function(t){return t.data.versions?t.data.versions.length:0},contentActualWidth:function(t){return(t.barWidth+t.barGap)*this.versionCount(t)},width:function(t){var e=t.data.currentVersionIndex?t.data.currentVersionIndex:0;return Math.max(t.contentWidth,2*((t.barWidth+t.barGap)*(Math.max(e,t.data.versions.length-e)+1)-t.barGap))},panning:function(t){return this.width(t)>t.contentWidth},left:function(t){var e=t.data.currentVersionIndex;return e<0?0:this.width(t)/2-(e*(t.barWidth+t.barGap)+t.barWidth/2+t.barWidth/2)},spacer:function(t){return t.barGap+t.barWidth},top:function(t){return t.topPadding},itemWidth:function(t){return t.barGap+t.barWidth}};function y(t){return t>=8?0:t>=4?1:t>1?2:1===t?3:4}function m(t){switch(t){case 0:return"#bc012f";case 1:return"#f4861d";case 2:return"#f5c648";case 3:return h;default:return}}function S(t){return function(e){return t.itemWidth*e+t.barGap}}var C,w,T,L=0,P=0,I=0,k=0;function H(t){return function(e){if(!t.panning)return!0;var n=t.itemWidth*e+t.barGap;return n>I&&n<k}}function G(t,e,n,i){var r=t.add(pv.Panel).width(e.width).top(e.top).height(e.spacer).left(3),a=e.barWidth+e.barGap-(i?0:1.5),o=H(e),l=S(e),d=e.width/2-l(e.data.currentVersionIndex);r.add(pv.Bar).top(1).data(e.vGridLines).width(a).height(a).left((function(){return l(this.index)+d-e.itemWidth+2})).fillStyle(n).visible((function(){return o(this.index)}))}function A(t,e,n){var i=t.add(pv.Panel).width(e.width).top(e.top-e.spacer).height(e.spacer).left(e.left),r=H(e);return i.add(pv.Bar).top(e.barGap/2).data(e.data.policyThreatLevels[n]).width(e.barWidth).height(e.barWidth).left((function(){return S(e)(this.index)})).visible((function(){return r(this.index)})).fillStyle(m).strokeStyle(m),e.top+=e.spacer,t}function V(t,e,n,i){t.add(pv.Label).left(28).top(n.top+1).textAlign("left").text(i),A(e,n,i.toUpperCase())}function R(t,e,a){var o=r?t.actualHeight+1:t.noCategoriesActualHeight,l=(r?t.height:t.noCategoriesHeight)-20;n.height(l).render(),i.height(l).render(),e.height(o).render(),$("#aiVersionChartContainer").height(o),$("#aiVersionChartViz").height(o),a.render()}p=0,f=null,l=null,t.data=(C=t.data,w={versions:[],versionPopularity:[],majorRevIndices:[],breakingChangeCounts:[],policyThreatLevels:{HIGHEST_THREAT:[],SECURITY:[],LICENSE:[],QUALITY:[],OTHER:[]}},T=!1,$.each(C.versions,(function(t,e){w.versions.push(e.componentIdentifier.coordinates.version),w.versionPopularity.push(e.popularity||e.relativePopularity||0);var n,i=null;null!==e.breakingChangesCount&&(T=!0,i=(n=e.breakingChangesCount)>5?0:n>=3?1:n>=1?2:0===n?3:4),w.breakingChangeCounts.push(i),C.version===e.componentIdentifier.coordinates.version&&(w.currentVersionIndex=t),e.majorRevisionStep&&w.majorRevIndices.push(t);var r=e.policyMaxThreatLevelsByCategory;w.policyThreatLevels.SECURITY.push(y(r.SECURITY)),w.policyThreatLevels.LICENSE.push(y(r.LICENSE)),w.policyThreatLevels.QUALITY.push(y(r.QUALITY)),w.policyThreatLevels.OTHER.push(y(r.OTHER)),w.policyThreatLevels.HIGHEST_THREAT.push(Math.min(w.policyThreatLevels.SECURITY[t],w.policyThreatLevels.LICENSE[t],w.policyThreatLevels.QUALITY[t],w.policyThreatLevels.OTHER[t]))})),T||(w.breakingChangeCounts=[]),w),function(t){L=0,P=0;var y,C,w,T,D=[],E=[6,8,9,10,11],M=[4,5,7,12],B=$("#aiVersionChartContainer"),j=t.data.breakingChangeCounts.length>0;if(t=$.extend({},e,t),r=t.showDetails,0!==B.length){for($.each(x,(function(e,n){t[e]=n.call(x,t)})),j&&(t.contentRows+=2,t.contentRowsNoCategories+=2,t.height+=t.barWidth+t.barGap,t.noCategoriesHeight+=t.barWidth+t.barGap,t.actualHeight+=t.barWidth+t.barGap,t.noCategoriesActualHeight+=t.barWidth+t.barGap,E=[5,7,9,10,11,12],M=[4,6,8,13]),B.height(t.actualHeight),C=(new pv.Panel).canvas("aiVersionChartLabels").overflow("hidden").height(t.actualHeight).width(t.labelWidth).fillStyle(u).strokeStyle(u),w=(new pv.Panel).canvas("aiVersionChartViz").overflow("hidden").height(t.actualHeight).width(t.contentWidth).fillStyle(u).strokeStyle(u),t.panning&&(w=(y=w).add(pv.Panel).overflow("hidden").height(t.actualHeight).width(t.contentWidth-30).fillStyle(u).strokeStyle(u).left(15)),T=0;T<=t.spacer*t.contentRows;T+=t.spacer)D.push(T);for(w.add(pv.Rule).data(D).left(0).width(t.width).top((function(e){return e+t.topPadding})).height(1).strokeStyle("#dee6f3").strokeDasharray("1 1"),t.vGridLines=[0],T=0;T<t.data.versions.length-1;T++)t.vGridLines.push(T);if(t.versionCount<2e3&&($.each(t.partialDisplay?[]:E,(function(e,n){G(w,$.extend({},t,{top:t.top+(n-1)*t.spacer}),"#edf1f4")})),$.each(t.partialDisplay?[]:M,(function(e,n){G(w,$.extend({},t,{top:t.top+(n-1)*t.spacer}),u,!0)}))),0!==t.versionCount&&(i=w.add(pv.Rule).left(t.width/2-1).top(t.topPadding).height(t.height-t.topPadding).strokeStyle("#949599"),w.add(pv.Label).left(t.width/2-70).top(15).textAlign("center").text("Older"),w.add(pv.Label).left(t.width/2).top(15).textAlign("center").text("This Version"),w.add(pv.Label).left(t.width/2+70).top(15).textAlign("center").text("Newer")),C.add(pv.Label).left(5).top(t.top+t.labelTop).textAlign("left").font("bold 10px arial").text("Popularity"),t.top+=1,function(t,e){var n=e.data,i=1,r=n.versionPopularity.length,a=S(e),o=t.add(pv.Panel),l=e.barHeight-3;o.width(e.width).height(e.barHeight).top(e.top).left(e.left),$.each(n.versionPopularity,(function(t,e){i=Math.max(i,e)})),i=1/i,$.each(n.majorRevIndices,(function(t,e){if(e>n.currentVersionIndex)return r=e,!1}));var d=H(e);o.add(pv.Bar).data(n.versionPopularity).width(e.barWidth).left((function(){return a(this.index)})).visible((function(){return d(this.index)})).height((function(t){return l*t*i+3})).bottom(0).fillStyle((function(){return this.index<n.currentVersionIndex?"#a8a9ad":this.index>=r?"#6d97d0":this.index===n.currentVersionIndex?"#58585a":"#8bc73e"})),o.add(pv.Rule).width(e.contentActualWidth+e.barGap).bottom(0).left(0).strokeStyle("#949599"),e.top+=e.barHeight+e.spacer}(w,t),t.top+=2*t.spacer+1,j&&(t.top-=t.spacer,C.add(pv.Label).left(5).top(t.top+1).textAlign("left").font("bold 10px arial").text("Breaking Changes"),function(t,e){var n=t.add(pv.Panel).width(e.width).top(e.top-e.spacer).height(e.spacer).left(e.left),i=H(e);n.add(pv.Bar).top(e.barGap/2).data(e.data.breakingChangeCounts).width(e.barWidth).height(e.barWidth).left((function(){return S(e)(this.index)})).visible((function(){return i(this.index)})).fillStyle(m).strokeStyle(m),e.top+=e.spacer}(w,t),t.top+=t.spacer),C.add(pv.Label).left(5).top(t.top+1).textAlign("left").font("bold 10px arial").text("Policy Threat"),A(w,t,"HIGHEST_THREAT"),C.add(pv.Label).left(15).top(t.top+1).textAlign("left").font("10px arial").text("Details").textDecoration("underline").textStyle(h).cursor("pointer").event("all").events("all").event("click",(function(){r=!r,R(t,C,w),this.text(r?"Hide Details":"Details").render()})),t.partialDisplay||(t.top+=t.spacer,V(C,w,t,"Security"),V(C,w,t,"License"),V(C,w,t,"Quality"),V(C,w,t,"Other")),0===t.versionCount)return function(t,e,n){var i=2*(n=$.extend({},b,n)).fontSize,r=7*n.fontSize*.6,a=n.height/2-i/2,o=n.leftPadding+(n.width-n.leftPadding-n.rightPadding-r)/2;t.add(pv.Bar).top(a).left(o).lineWidth(0).height(i).width(r).strokeStyle(c).fillStyle(c),t.add(pv.Dot).top(a+i/2).left(o).radius(i/2).lineWidth(0).strokeStyle(c).fillStyle(c),t.add(pv.Dot).top(a+i/2).left(o+r).radius(i/2).lineWidth(0).strokeStyle(c).fillStyle(c),t.add(pv.Label).top(a+i/2).left(o+r/2).width(r).font("normal "+(n.fontSize+1)+"px arial").textAlign("center").textBaseline("middle").text(e)}(w,"No Data",{width:t.contentWidth,height:t.actualHeight}),C.render(),void w.render();!function(t,i){function r(t){return i.showCurrentVersionLabel&&i.data.currentVersionIndex===t}var l=t.add(pv.Panel).def("i",-1),d=(a=l.add(pv.Bar)).anchor("bottom").add(pv.Label).visible((function(){return r(this.index)})).textAlign("center").textBaseline("top"),h=S(i),s=H(i);o=null,n=a,a.data(i.data.versions).width(i.spacer-1).left((function(){return i.left+h(this.index)-1})).top(i.topPadding).height(e.partialDisplay?i.height:i.height-20).lineWidth(0).strokeStyle(u).fillStyle("transparent").events("all").event("mouseover",(function(){l.i(this.index),this.render(),d.visible((function(){return l.i()===this.index})).render()})).visible((function(){return s(this.index)})).event("mouseout",(function(){l.i(-1),this.render(),d.visible((function(){return r(this.index)})).render()})).fillStyle((function(){return l.i()===this.index?pv.color("rgba(153, 204, 255, 0.5)"):this.index===o?pv.color("rgba(10, 10, 10, 0.15)"):"transparent"})).strokeStyle((function(){return this.index===o?pv.color("rgba(10, 10, 10, 0.5)"):pv.color("rgba(255, 255, 255,0.1)")})).lineWidth(1),i.selectable&&(o=i.data.currentVersionIndex,a.event("click",(function(){i.versionClick(this.data()),o=this.index,this.render()})),a.event("dblclick",(function(){i.versionDblClick(this.data())})))}(w,t),t.panning&&(d=function(t,e,n,i){var r=i.data.currentVersionIndex?i.data.currentVersionIndex:0,a=S(i),o=i.width/2-a(r),l=function(t){g=(v=-t-o)+i.contentWidth,I=v-i.contentWidth,k=g+i.contentWidth};l(0);var d=!1,h=!1,c=!1,b=function t(){var n=.5*(P-L);if(Math.abs(n)<.001)L=P,c=!1;else{var i=e.transform().translate(n,0);c=!0,l(L+=n),e.transform(i).render(),requestAnimationFrame(t)}},x=function(t){var e=p+t;f||(f=e,L=P,b());var n=4*i.itemWidth,r=-1*(o-2*n),a=r+-1*(i.contentActualWidth-4*n);t>0&&e<r||t<0&&e>a?(p=e,P=e,c||b()):(d=!1,h=!1)},y=function t(){d&&(x(10),setTimeout(t,100))},W=function(t){for(var e=0;e<t;e++)x(10)},m=function t(){h&&(x(-10),setTimeout(t,100))},C=function(t){for(var e=0;e<t;e++)x(-10)};return b(),n.add(pv.Dot).left(i.contentWidth-7).top(65).fillStyle(u).strokeStyle(s).angle(-Math.PI/2).shape("triangle").lineWidth(1).size(30).cursor("pointer").events("all").event("mouseover",(function(){this.fillStyle(s).render()})).event("mouseout",(function(){this.fillStyle(u).render(),h=!1})).event("mousedown",(function(){h=!0,setTimeout(m,0)})).event("dblclick",(function(){C(i.contentWidth/10)})).event("mouseup",(function(){h=!1})),n.add(pv.Dot).left(7).top(65).fillStyle(u).strokeStyle(s).angle(Math.PI/2).shape("triangle").lineWidth(1).size(30).cursor("pointer").event("all").events("all").event("mouseover",(function(){this.fillStyle(s).render()})).event("mouseout",(function(){this.fillStyle(u).render(),d=!1})).event("mousedown",(function(){d=!0,setTimeout(y,0)})).event("dblclick",(function(){W(i.contentWidth/10)})).event("mouseup",(function(){d=!1})),n.add(pv.Label).left(0).top(85).textAlign("left").textBaseline("middle").text("«").font("18px Arial").cursor("pointer").event("all").events("all").event("dblclick",(function(){W(i.versionCount*i.itemWidth)})).event("click",(function(){var t=S(i)(i.data.currentVersionIndex);W(v<=t?i.contentWidth:((v+g)/2/i.itemWidth-i.data.currentVersionIndex)*i.itemWidth/10)})),n.add(pv.Label).left(i.contentWidth).top(85).textAlign("right").textBaseline("middle").text("»").font("18px Arial").cursor("pointer").event("all").events("all").event("dblclick",(function(){C(i.versionCount*i.itemWidth)})).event("click",(function(){var t=S(i)(i.data.currentVersionIndex);C(g>=t?i.contentWidth:(i.data.currentVersionIndex-(v+g)/2/i.itemWidth)*i.itemWidth/10)})),x}(0,w,y,t),t.contentWidth-=15),R(t,C,w),t.panning&&W(-(t.width/2-t.contentWidth+t.contentWidth/2)),l=t}}(t)};function y(t){W(-1*(t-(v+g)/2/l.itemWidth)*l.itemWidth),o=t,a.render()}function W(t){if(null!=d)for(var e=Math.floor(Math.abs(t)/10),n=10*Math.sign(t),i=0;i<e;i++)d(n)}return e}()}));