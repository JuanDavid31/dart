/*
 * Copyright (c) 2011-present Sonatype, Inc. All rights reserved.
 * Includes the third-party code listed at http://links.sonatype.com/products/clm/attributions.
 * "Sonatype" is a trademark of Sonatype, Inc.
 */
/* eslint react/prop-types: 0 */
import React from 'react';
import { map } from 'ramda';
import RenderDetail from './RenderDetail';
import SeverityScoreDisplay from './SeverityScoreDisplay';
import SubDescriptionList from './SubDescriptionList';

function renderScore(severityScore) {
  return <SeverityScoreDisplay key={severityScore.source || 'only'} severityScore={severityScore} />;
}

const SeverityDetail = function SeverityDetail({ mainSeverity, customSeverity, severityScores }) {
  let compoundedSeverities = mainSeverity ? [mainSeverity, ...(severityScores || [])] : [...(severityScores || [])];
  compoundedSeverities = customSeverity
    ? [
        {
          isCustom: true,
          source: 'severity',
          score: customSeverity,
        },
        ...compoundedSeverities,
      ]
    : compoundedSeverities;

  return compoundedSeverities && compoundedSeverities.length ? (
    <RenderDetail title="Severity">
      <SubDescriptionList>{map(renderScore, compoundedSeverities)}</SubDescriptionList>
    </RenderDetail>
  ) : null;
};

export default SeverityDetail;
