/*
 * Copyright (c) 2011-present Sonatype, Inc. All rights reserved.
 * Includes the third-party code listed at http://links.sonatype.com/products/clm/attributions.
 * "Sonatype" is a trademark of Sonatype, Inc.
 */
import iqReact2Angular from 'MainRoot/reactAdapter/iqReact2Angular';
import VulnerabilitySearch from './VulnerabilitySearch';
import { ROUTE_AUTHENTICATION_REQUIRED_BACKEND_CONFIGURABLE } from 'MainRoot/utility/services/routeStateUtilService';

export default angular
  .module('vulnerabilitySearch', [])
  .component('vulnerabilitySearch', iqReact2Angular(VulnerabilitySearch, [], ['$ngRedux']))
  .config(routes);

const vulnerabilitiesRouteCommonProps = {
  component: 'vulnerabilitySearch',
  data: {
    title: 'Vulnerability Lookup',
    authenticationRequired: ROUTE_AUTHENTICATION_REQUIRED_BACKEND_CONFIGURABLE,
  },
};

function routes($stateProvider) {
  $stateProvider
    .state('vulnerabilitySearch', {
      ...vulnerabilitiesRouteCommonProps,
      url: '/vulnerabilities',
    })
    .state('vulnerabilitySearchDetail', {
      ...vulnerabilitiesRouteCommonProps,
      url: '/vulnerabilities/{id}',
    });
}

routes.$inject = ['$stateProvider'];
